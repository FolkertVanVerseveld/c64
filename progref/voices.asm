// converted from BASIC from the Commodore 64 Programmer's reference guide page 187
.pc = $0801 "Basic Upstart Program"
:BasicUpstart($0810)

.pc = $0810 "Main Program"

.macro small_delay() {
	.for (var i = 0; i < 3; i++) {
	ldy #0
!l:
	iny
	bne !l-
	}
}

	jsr clearsid
	lda #8
	sta $d40a
	lda #128
	sta $d416
	lda #244
	sta $d417
	// setup playback
	lda #0
	sta $d405
	lda #240
	sta $d406
	lda #85
	sta $d40c
	lda #133
	sta $d40d
	lda #10
	sta $d413
	lda #197
	sta $d414
	lda #31
	sta $d418
	// kernel setup
	ldx #0
kernel:
	lda low0, x
	sta $d400
	lda low1, x
	sta $d407
	lda low2, x
	sta $d40e
	lda high0, x
	sta $d401
	lda high1, x
	sta $d408
	lda high2, x
	sta $d40f
	lda ch0, x
	sta $d404
	lda ch1, x
	sta $d40b
	lda ch2, x
	sta $d412
	inx
// create some delay
.for (var i = 0; i < 9; i++) {
!wait:
	bit $d011
	bpl !wait-
!wait:
	bit $d011
	bmi !wait-
}
	cpx #192
	beq loop
	jmp kernel
loop:
	jsr clearsid
	brk
	jmp loop

clearsid:
	// clear sid state
	lda #0
	ldx #0
!l:
	sta $d400, x
	inx
	cpx #$19
	bne !l-
	rts

low0:
	.byte 162, 162, 162, 162, 162, 162, 162, 162
	.byte 162, 162, 162, 162,  62,  62,  62,  62
	.byte  62,  62,  62,  62, 162, 162, 162, 162
	.byte 162, 162, 162, 162, 162, 162, 162, 162
	.byte 165, 165, 165, 165, 135, 135, 135, 135
	.byte 165, 165, 165, 165,  49,  49,  49,  49
	.byte 165, 165, 135, 135,  49,  49,  49,  49
	.byte  49,  49,  49,  49,  30,  30,  30,  30
	.byte  49,  49,  49,  49,  49,  49,  49,  49
	.byte  49,  49,  49,  49, 165, 165, 165, 165
	.byte 165, 165, 165, 165,  49,  49,  49,  49
	.byte  49,  49,  49,  49,  49,  49,  49,  49
	.byte  49,  49,  49,  49, 165, 165, 134, 134
	.byte 162, 162, 162, 162, 162, 162, 162, 162
	.byte 134, 134, 134, 134, 162, 162, 162, 162
	.byte 162, 162, 162, 162, 162, 162, 162, 162
	.byte 162, 162, 162, 162,  62,  62,  62,  62
	.byte 162, 162, 162, 162, 135, 135, 135, 135
	.byte 165, 165, 165, 165, 135, 135, 135, 135
	.byte 135, 135, 135, 135, 135, 135, 135, 135
	.byte 165, 165, 165, 165,  49,  49,  49,  49
	.byte 165, 165, 135, 135,  49,  49,  49,  49
	.byte  49,  49,  30,  30,  30,  30,  30,  30
	.byte  30,  30,  30,  30,  30,  30,  30,  30
high0:
	.byte  37,  37,  37,  37,  37,  37,  37,  37
	.byte  37,  37,  37,  37,  42,  42,  42,  42
	.byte  42,  42,  42,  42,  37,  37,  37,  37
	.byte  37,  37,  37,  37,  37,  37,  37,  37
	.byte  31,  31,  31,  31,  33,  33,  33,  33
	.byte  31,  31,  31,  31,  28,  28,  28,  28
	.byte  31,  31,  33,  33,  28,  28,  28,  28
	.byte  28,  28,  28,  28,  25,  25,  25,  25
	.byte  28,  28,  28,  28,  28,  28,  28,  28
	.byte  28,  28,  28,  28,  31,  31,  31,  31
	.byte  31,  31,  31,  31,  28,  28,  28,  28
	.byte  28,  28,  28,  28,  28,  28,  28,  28
	.byte  28,  28,  28,  28,  31,  31,  35,  35
	.byte  37,  37,  37,  37,  37,  37,  37,  37
	.byte  35,  35,  35,  35,  37,  37,  37,  37
	.byte  37,  37,  37,  37,  37,  37,  37,  37
	.byte  37,  37,  37,  37,  42,  42,  42,  42
	.byte  37,  37,  37,  37,  33,  33,  33,  33
	.byte  31,  31,  31,  31,  33,  33,  33,  33
	.byte  33,  33,  33,  33,  33,  33,  33,  33
	.byte  31,  31,  31,  31,  28,  28,  28,  28
	.byte  31,  31,  33,  33,  28,  28,  28,  28
	.byte  28,  28,  25,  25,  25,  25,  25,  25
	.byte  25,  25,  25,  25,  25,  25,  25,  25
ch0:
	.byte  17,  17,  17,  16,  17,  17,  17,  16
	.byte  17,  17,  17,  16,  17,  17,  17,  16
	.byte  17,  17,  17,  16,  17,  17,  17,  17
	.byte  17,  17,  17,  17,  17,  17,  17,  16
	.byte  17,  17,  17,  16,  17,  17,  17,  16
	.byte  17,  17,  17,  16,  17,  17,  17,  16
	.byte  17,  16,  17,  16,  17,  17,  17,  17
	.byte  17,  17,  17,  16,  17,  17,  17,  16
	.byte  17,  17,  17,  16,  17,  17,  17,  16
	.byte  17,  17,  17,  16,  17,  17,  17,  16
	.byte  17,  17,  17,  16,  17,  17,  17,  17
	.byte  17,  17,  17,  17,  17,  17,  17,  16
	.byte  17,  17,  17,  16,  17,  16,  17,  16
	.byte  17,  17,  17,  16,  17,  17,  17,  16
	.byte  17,  17,  17,  16,  17,  17,  17,  17
	.byte  17,  17,  17,  17,  17,  17,  17,  16
	.byte  17,  17,  17,  16,  17,  17,  17,  16
	.byte  17,  17,  17,  16,  17,  17,  17,  16
	.byte  17,  17,  17,  16,  17,  17,  17,  17
	.byte  17,  17,  17,  17,  17,  17,  17,  16
	.byte  17,  17,  17,  16,  17,  17,  17,  16
	.byte  17,  16,  17,  16,  17,  17,  17,  17
	.byte  17,  16,  17,  16,  17,  17,  17,  17
	.byte  17,  17,  17,  17,  17,  17,  17,  16
low1:
	.byte  30,  30,  30,  30,  49,  49,  49,  49
	.byte  30,  30,  30,  30,  30,  30,  30,  30
	.byte  30,  30,  49,  49, 165, 165, 165, 165
	.byte 165, 165, 165, 165, 165, 165, 165, 165
	.byte  30,  30,  30,  30,  49,  49,  49,  49
	.byte 209, 209, 209, 209, 209, 209, 209, 209
	.byte 209, 209, 209, 209,  31, 181,  30,  30
	.byte  30,  30, 181, 181, 209, 209, 209, 209
	.byte 181, 181,  30,  30,  49,  49,  30,  30
	.byte  49,  49, 181, 181, 209, 209, 209, 209
	.byte  30,  30,  30,  30, 181, 181, 181, 181
	.byte 181, 181, 181, 181, 181, 181, 181, 181
	.byte 181, 181, 181, 181, 209, 209,  31,  31
	.byte 181, 181, 181, 181, 165, 165, 165, 165
	.byte  49,  49,  30,  30, 181, 181, 181, 181
	.byte 181, 181, 181, 181, 181, 181, 181, 181
	.byte  30,  30,  30,  30,  30,  30,  49,  49
	.byte 165, 165, 165, 165, 165, 165,  49,  49
	.byte  49,  49, 156, 156,  49,  49,  49,  49
	.byte  49,  49,  49,  49,  49,  49,  49,  49
	.byte 209, 209, 209, 209, 209, 209, 209, 209
	.byte 209, 209,  31,  31, 209, 209,  30,  30
	.byte  49,  49,  49,  49, 209, 209, 209, 209
	.byte 209, 209, 209, 209, 209, 209, 209, 209
high1:
	.byte  25,  25,  25,  25,  28,  28,  28,  28
	.byte  25,  25,  25,  25,  25,  25,  25,  25
	.byte  25,  25,  28,  28,  31,  31,  31,  31
	.byte  31,  31,  31,  31,  31,  31,  31,  31
	.byte  25,  25,  25,  25,  28,  28,  28,  28
	.byte  18,  18,  18,  18,  18,  18,  18,  18
	.byte  18,  18,  18,  18,  21,  23,  25,  25
	.byte  25,  25,  23,  23,  18,  18,  18,  18
	.byte  23,  23,  25,  25,  28,  28,  25,  25
	.byte  28,  28,  23,  23,  18,  18,  18,  18
	.byte  25,  25,  25,  25,  23,  23,  23,  23
	.byte  23,  23,  23,  23,  23,  23,  23,  23
	.byte  23,  23,  23,  23,  18,  18,  21,  21
	.byte  23,  23,  23,  23,  31,  31,  31,  31
	.byte  28,  28,  25,  25,  23,  23,  23,  23
	.byte  23,  23,  23,  23,  23,  23,  23,  23
	.byte  25,  25,  25,  25,  25,  25,  28,  28
	.byte  31,  31,  31,  31,  31,  31,  28,  28
	.byte  28,  28,  26,  26,  28,  28,  28,  28
	.byte  28,  28,  28,  28,  28,  28,  28,  28
	.byte  18,  18,  18,  18,  18,  18,  18,  18
	.byte  18,  18,  21,  21,  18,  18,  25,  25
	.byte  28,  28,  28,  28,  18,  18,  18,  18
	.byte  18,  18,  18,  18,  18,  18,  18,  18
ch1:
	.byte  65,  65,  65,  64,  65,  65,  65,  64
	.byte  65,  65,  65,  64,  65,  65,  65,  64
	.byte  65,  64,  65,  64,  65,  65,  65,  65
	.byte  65,  65,  65,  65,  65,  65,  65,  64
	.byte  65,  65,  65,  64,  65,  65,  65,  64
	.byte  65,  65,  65,  64,  65,  65,  65,  64
	.byte  65,  65,  65,  64,  65,  65,  65,  65
	.byte  65,  64,  65,  64,  65,  65,  65,  64
	.byte  65,  64,  65,  64,  65,  64,  65,  64
	.byte  65,  64,  65,  64,  65,  65,  65,  64
	.byte  65,  65,  65,  64,  65,  65,  65,  65
	.byte  65,  65,  65,  65,  65,  65,  65,  64
	.byte  65,  65,  65,  64,  65,  64,  65,  64
	.byte  65,  65,  65,  64,  65,  65,  65,  64
	.byte  65,  64,  65,  64,  65,  65,  65,  65
	.byte  65,  65,  65,  65,  65,  65,  65,  64
	.byte  65,  65,  65,  64,  65,  64,  65,  64
	.byte  65,  65,  65,  64,  65,  64,  65,  64
	.byte  65,  64,  65,  64,  65,  65,  65,  65
	.byte  65,  65,  65,  65,  65,  65,  65,  64
	.byte  65,  65,  65,  64,  65,  65,  65,  65
	.byte  65,  64,  65,  64,  65,  64,  65,  64
	.byte  65,  65,  65,  64,  65,  65,  65,  65
	.byte  65,  65,  65,  65,  65,  65,  65,  64
low2:
	.byte 143, 143, 143, 143, 218, 218, 218, 218
	.byte 143, 143, 143, 143,  97,  97, 104, 104
	.byte 143, 143, 218, 218, 143, 143, 143, 143
	.byte 143, 143, 143, 143, 143, 143, 143, 143
	.byte 143, 143, 143, 143, 143, 143, 218, 218
	.byte 143, 143, 143, 143, 104, 104,  97,  97
	.byte 233, 233, 143, 143,  97,  97, 233,  97
	.byte 104, 104, 251, 251,  71,  71,  71,  71
	.byte 104, 104, 143, 143, 218, 218, 143, 143
	.byte 218, 218, 104, 104,  71,  71,  12,  12
	.byte 233, 233,  97,  97, 104, 104, 104, 104
	.byte 104, 104, 104, 104, 104, 104, 104, 104
	.byte 104, 104, 104, 104, 143, 143, 143, 143
	.byte 218, 218, 210, 210, 143, 143, 143, 143
	.byte  24,  24,  12,  12, 104, 104, 104, 104
	.byte 104, 104, 104, 104, 104, 104, 104, 104
	.byte 143, 143, 143, 143,  97,  97,  97,  97
	.byte 143, 143,  48,  48, 143, 143,  48,  48
	.byte 104, 104, 143, 143,  12,  12,  12,  12
	.byte  12,  12,  12,  12,  12,  12,  12,  12
	.byte 233, 233,  71,  71, 104, 104, 218, 218
	.byte 143, 143,  97,  97, 104, 104, 104, 104
	.byte 180, 180, 180, 180,  71,  71,  71,  71
	.byte  71,  71,  71,  71,  71,  71,  71,  71
high2:
	.byte  12,  12,  12,  12,  11,  11,  11,  11
	.byte  12,  12,  12,  12,   8,   8,   9,   9
	.byte  10,  10,  11,  11,  12,  12,  12,  12
	.byte  12,  12,  12,  12,  12,  12,  12,  12
	.byte  12,  12,  12,  12,  12,  12,  11,  11
	.byte  12,  12,  12,  12,   9,   9,   8,   8
	.byte   7,   7,  10,  10,   8,   8,   7,   8
	.byte   9,   9,   4,   4,   6,   6,   6,   6
	.byte   9,   9,  10,  10,  11,  11,  10,  10
	.byte  11,  11,   9,   9,   6,   6,   7,   7
	.byte   7,   7,   8,   8,   9,   9,   9,   9
	.byte   9,   9,   9,   9,   9,   9,   9,   9
	.byte   9,   9,   9,   9,  12,  12,  12,  12
	.byte  11,  11,  15,  15,  12,  12,  10,  10
	.byte  14,  14,   7,   7,   9,   9,   9,   9
	.byte   9,   9,   9,   9,   9,   9,   9,   9
	.byte  12,  12,  12,  12,   8,   8,   8,   8
	.byte  12,  12,  11,  11,  10,  10,  11,  11
	.byte   9,   9,  10,  10,   7,   7,   7,   7
	.byte   7,   7,   7,   7,   7,   7,   7,   7
	.byte   7,   7,   6,   6,   9,   9,  11,  11
	.byte  12,  12,   8,   8,   9,   9,   9,   9
	.byte   4,   4,   4,   4,   6,   6,   6,   6
	.byte   6,   6,   6,   6,   6,   6,   6,   6
ch2:
	.byte  33,  33,  33,  32,  33,  33,  33,  32
	.byte  33,  33,  33,  32,  33,  32,  33,  32
	.byte  33,  32,  33,  32,  33,  33,  33,  33
	.byte  33,  33,  33,  33,  33,  33,  33,  32
	.byte  33,  33,  33,  32,  33,  32,  33,  32
	.byte  33,  33,  33,  32,  33,  32,  33,  32
	.byte  33,  32,  33,  32,  33,  32,  33,  33
	.byte  33,  32,  33,  32,  33,  33,  33,  32
	.byte  33,  32,  33,  32,  33,  32,  33,  32
	.byte  33,  32,  33,  32,  33,  32,  33,  32
	.byte  33,  32,  33,  32,  33,  33,  33,  33
	.byte  33,  33,  33,  33,  33,  33,  33,  32
	.byte  33,  33,  33,  32,  33,  33,  33,  32
	.byte  33,  32,  33,  32,  33,  32,  33,  32
	.byte  33,  32,  33,  32,  33,  33,  33,  33
	.byte  33,  33,  33,  33,  33,  33,  33,  32
	.byte  33,  33,  33,  32,  33,  33,  33,  32
	.byte  33,  32,  33,  32,  33,  32,  33,  32
	.byte  33,  32,  33,  32,  33,  33,  33,  33
	.byte  33,  33,  33,  33,  33,  33,  33,  32
	.byte  33,  32,  33,  32,  33,  32,  33,  32
	.byte  33,  32,  33,  32,  33,  33,  33,  32
	.byte  33,  33,  33,  32,  33,  33,  33,  33
	.byte  33,  33,  33,  33,  33,  33,  33,  32
